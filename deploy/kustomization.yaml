# Kustomization 配置：一键部署 Ark 到 Kubernetes 集群
# 使用方法：kubectl apply -k deploy/

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: ark-system

resources:
  - namespace.yaml
  - rbac.yaml
  - hub-deployment.yaml
  - agent-daemonset.yaml

# 可选：通过 ConfigMap 提供规则和探针脚本
# configMapGenerator:
#   - name: ark-rules
#     files:
#       - rules/gpu-oom.yaml
#       - rules/network-stall.yaml
#       - rules/workload-stalled.yaml
#   - name: ark-probes
#     files:
#       - examples/ark-probe-nvml.py
#       - examples/ark-probe-network.py

# 可选：镜像替换（用于不同环境）
# images:
#   - name: ark-hub
#     newName: registry.example.com/ark-hub
#     newTag: v1.0.0
#   - name: ark
#     newName: registry.example.com/ark
#     newTag: v1.0.0
